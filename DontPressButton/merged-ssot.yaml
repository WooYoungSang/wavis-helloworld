# 🎯 DontPressButton - Single Source of Truth (SSOT) v1.0
# Generated by Demeter WAVIS v2.0 Constitutional SDD Framework

metadata:
  doc_id: "SSOT-DPB-MVP-v1.0"
  domain: "Web UI / Micro Interaction / Modal Flow"
  scope: "Single Page Application with DOM manipulation"
  primary_language: "Mixed (English UI, Korean warnings, English confirmations)"
  target_platform: "Desktop & Mobile Web (responsive)"
  config_source: "./config/app.config.json"
  priority: "P0 (MVP complete)"
  framework: "Demeter WAVIS v2.0 Constitutional SDD"
  constitution_compliance: true

project_overview:
  description: |
    Interactive web application featuring a central "Don't Press Button" that responds to user clicks
    with increasingly playful Korean warning messages, culminating in a payment confirmation modal
    on the 10th click. Designed as a delightful micro-interaction experience.

  core_value_proposition: "Delightful micro-interaction that surprises and engages users"
  target_audience: "Web users interested in playful, interactive experiences"
  success_metrics:
    - "User completes full 10-click journey"
    - "Sub-100ms response time for interactions"
    - "Zero accessibility violations"
    - "Single-file deployment success"

# 📋 Functional Requirements (FR)
functional_requirements:
  fr_001_header_display:
    id: "FR-001"
    title: "Header Text Display"
    description: "Display 'Don't Press Button' text at top of screen with intentionally rough styling"
    priority: "P0"
    acceptance_criteria:
      - "Text 'Don't Press Button' visible at screen top"
      - "Rough/crude styling applied (distorted font, text shadow)"
      - "Text remains visible across all viewport sizes"
    constitutional_alignment: "Simplicity principle - direct text display"

  fr_002_button_rendering:
    id: "FR-002"
    title: "Red Button Rendering"
    description: "Display prominent red button below header text"
    priority: "P0"
    acceptance_criteria:
      - "Button is colored brand-red (#d62828)"
      - "Button positioned below header text"
      - "Button label reads 'Don't Press Button' in English"
      - "Button is large and prominent"
    constitutional_alignment: "Framework-direct principle - native button element"

  fr_003_click_counting_warnings:
    id: "FR-003"
    title: "Click Counting with Random Warnings"
    description: "Track button clicks and display random Korean warning messages"
    priority: "P0"
    acceptance_criteria:
      - "Click count increments by 1 on each button press"
      - "Random Korean warning message appears above button after each click"
      - "Messages selected from predefined pool (20 messages)"
      - "Duplicate messages allowed (true randomness)"
      - "Message area positioned between header and button"
    constitutional_alignment: "Anti-abstraction principle - simple state management"
    warning_messages:
      - "분명 누르지 말랬죠?"
      - "왜 누르셨나요…?"
      - "다음엔 참아볼까요?"
      - "진짜 누르지 말랬는데요."
      - "혹시 경고를 못 보신 건가요?"
      - "또 눌렀네요. 이유가 있나요?"
      - "그러다 큰일 납니다(?)"
      - "눌러보라고 쓴 거 아닙니다."
      - "이건 테스트가 아니에요."
      - "정말 마지막 경고입니다(아마도)."
      - "손가락을 잠시 쉬게 하세요."
      - "그 호기심, 위험합니다."
      - "버튼과 거리두기 해요."
      - "클릭 자제 부탁드립니다."
      - "버튼이 슬퍼합니다."
      - "당신의 인내심을 믿습니다."
      - "이쯤이면 멈춰도 되죠?"
      - "다음 클릭은 비추천입니다."
      - "정말 정말 누르지 마세요."
      - "여기까지 온 건 비밀로 하죠."

  fr_004_payment_modal:
    id: "FR-004"
    title: "10th Click Payment Confirmation Modal"
    description: "Display payment confirmation modal on exactly 10th click"
    priority: "P0"
    acceptance_criteria:
      - "Modal appears when click count reaches exactly 10"
      - "Modal message: 'Would you like to proceed with payment?' (English)"
      - "Modal contains 'Yes' and 'No' buttons"
      - "Modal blocks interaction with background"
      - "Modal centers on screen"
    constitutional_alignment: "Library-first principle - native dialog element"

  fr_005_modal_actions:
    id: "FR-005"
    title: "Modal Response Actions"
    description: "Handle user responses to payment confirmation modal"
    priority: "P0"
    acceptance_criteria:
      - "Yes button: Display 'Payment completed' alert, then close modal"
      - "No button: Close modal with no other action"
      - "ESC key: Close modal (accessibility requirement)"
      - "Click outside modal: No action (prevent accidental closure)"
    constitutional_alignment: "Accessibility-first domain principle"

  fr_006_count_persistence:
    id: "FR-006"
    title: "Count Reset Policy"
    description: "Define count persistence behavior for MVP"
    priority: "P0"
    acceptance_criteria:
      - "Page refresh resets count to 0"
      - "No localStorage or sessionStorage usage in MVP"
      - "Post-10th click behavior: continue counting without additional modals"
    constitutional_alignment: "Simplicity principle - no persistence complexity"

# 🚀 Non-Functional Requirements (NFR)
non_functional_requirements:
  nfr_001_performance:
    id: "NFR-001"
    title: "Interaction Performance"
    description: "All user interactions must respond within 100ms"
    priority: "P0"
    acceptance_criteria:
      - "Button click response < 100ms"
      - "Modal display time < 50ms"
      - "Page initial load < 1 second"
    measurement: "Performance.now() timing measurements"
    constitutional_alignment: "Performance-first domain principle"

  nfr_002_accessibility:
    id: "NFR-002"
    title: "Accessibility Compliance"
    description: "Full keyboard and screen reader accessibility"
    priority: "P0"
    acceptance_criteria:
      - "Button focusable with Tab navigation"
      - "Button activatable with Enter/Space keys"
      - "Modal focus trap when displayed"
      - "ESC key closes modal"
      - "Proper ARIA labels and landmarks"
      - "4.5:1 minimum color contrast"
    constitutional_alignment: "Accessibility-first domain principle"

  nfr_003_responsive_design:
    id: "NFR-003"
    title: "Responsive Layout"
    description: "Layout works on all device sizes"
    priority: "P0"
    acceptance_criteria:
      - "Functional on 360px mobile viewport"
      - "Scalable to desktop sizes"
      - "Touch-friendly button sizing (44px minimum)"
      - "Readable text on all screen sizes"
    constitutional_alignment: "Mobile-first domain principle"

  nfr_004_browser_compatibility:
    id: "NFR-004"
    title: "Browser Support"
    description: "Support modern browsers"
    priority: "P0"
    acceptance_criteria:
      - "Chrome/Edge/Safari latest versions"
      - "Firefox latest version"
      - "Mobile Safari and Chrome"
    constitutional_alignment: "Framework-direct principle - native APIs"

  nfr_005_visual_design:
    id: "NFR-005"
    title: "Intentional Crude Styling"
    description: "Deliberately rough aesthetic for personality"
    priority: "P1"
    acceptance_criteria:
      - "Distorted/skewed text effects"
      - "Irregular shadows and spacing"
      - "Deliberately imperfect alignment"
      - "Not so crude as to harm usability"
    constitutional_alignment: "Simplicity principle - minimal but intentional styling"

  nfr_006_security_privacy:
    id: "NFR-006"
    title: "Privacy and Security"
    description: "No data collection or external transmission"
    priority: "P0"
    acceptance_criteria:
      - "No external API calls"
      - "No cookies or localStorage (MVP)"
      - "No user tracking or analytics"
      - "No eval() or unsafe JavaScript"
    constitutional_alignment: "Security-first practices"

  nfr_007_deployment:
    id: "NFR-007"
    title: "Deployment Simplicity"
    description: "Single-file deployment capability"
    priority: "P0"
    acceptance_criteria:
      - "Self-contained HTML file with embedded CSS/JS"
      - "No build process required for basic deployment"
      - "Static hosting compatible"
      - "CDN deployable"
    constitutional_alignment: "Minimal structure principle"

# 🔄 State Model
state_model:
  states:
    idle:
      description: "Initial application state"
      properties:
        click_count: 0
        current_message: null
        modal_visible: false
      valid_transitions: ["counting"]

    counting:
      description: "Active click counting state"
      properties:
        click_count: "1-9"
        current_message: "random Korean warning"
        modal_visible: false
      valid_transitions: ["counting", "confirming"]

    confirming:
      description: "Payment confirmation modal displayed"
      properties:
        click_count: 10
        current_message: "Korean warning"
        modal_visible: true
      valid_transitions: ["completed", "counting"]

    completed:
      description: "Payment confirmation acknowledged"
      properties:
        click_count: 10
        current_message: "Korean warning"
        modal_visible: false
      valid_transitions: ["counting"]

  state_transitions:
    button_click:
      trigger: "User clicks main button"
      from_states: ["idle", "counting", "completed"]
      to_state: "counting or confirming based on count"
      side_effects:
        - "Increment click_count"
        - "Update current_message with random selection"
        - "Show modal if count == 10"

    modal_yes:
      trigger: "User clicks Yes in modal"
      from_states: ["confirming"]
      to_state: "completed"
      side_effects:
        - "Display 'Payment completed' alert"
        - "Hide modal"

    modal_no:
      trigger: "User clicks No in modal or ESC"
      from_states: ["confirming"]
      to_state: "counting"
      side_effects:
        - "Hide modal"
        - "No other changes"

    page_refresh:
      trigger: "User refreshes page"
      from_states: ["any"]
      to_state: "idle"
      side_effects:
        - "Reset all state to initial values"

# 📊 Data Model
data_model:
  application_state:
    click_count:
      type: "integer"
      initial_value: 0
      constraints: "non-negative"
      persistence: "session-only (lost on refresh)"

    current_message:
      type: "string"
      initial_value: null
      constraints: "must be from warning_messages array"
      persistence: "session-only"

    modal_visible:
      type: "boolean"
      initial_value: false
      constraints: "true only when click_count == 10"
      persistence: "session-only"

  configuration_data:
    warning_messages:
      type: "array<string>"
      source: "config/app.config.json"
      usage: "random selection on each click"
      localization: "Korean language"

    ui_text:
      type: "object"
      properties:
        header: "Don't Press Button"
        button_label: "Don't Press Button"
        modal_title: "Would you like to proceed with payment?"
        modal_yes: "Yes"
        modal_no: "No"
        payment_complete: "Payment completed"

    behavior_config:
      type: "object"
      properties:
        trigger_count: 10
        persist_count: false
        allow_duplicates: true

# 🎯 Event Model
event_model:
  events:
    EVT_BUTTON_CLICK:
      description: "Main button clicked"
      payload:
        timestamp: "Date.now()"
        current_count: "number"
      handlers:
        - "incrementClickCount()"
        - "displayRandomMessage()"
        - "checkForModal()"

    EVT_MODAL_SHOW:
      description: "Payment modal displayed"
      payload:
        trigger_count: 10
      handlers:
        - "showModal()"
        - "trapFocus()"

    EVT_MODAL_YES:
      description: "User confirms payment"
      payload:
        choice: "yes"
      handlers:
        - "showPaymentAlert()"
        - "hideModal()"

    EVT_MODAL_NO:
      description: "User declines payment"
      payload:
        choice: "no"
      handlers:
        - "hideModal()"

    EVT_MODAL_ESC:
      description: "User presses ESC in modal"
      payload:
        key: "Escape"
      handlers:
        - "hideModal()"

# 🏗️ Architecture Specifications
architecture:
  deployment_architecture:
    type: "Single Page Application"
    structure: "Self-contained HTML file"
    dependencies: "None (native browser APIs only)"
    hosting: "Static file hosting"

  technical_architecture:
    html_structure:
      - "Semantic header element for title"
      - "Main container with message area"
      - "Button element with event handlers"
      - "Dialog element for modal"

    css_approach:
      - "Embedded CSS in <style> tag"
      - "CSS Grid/Flexbox for layout"
      - "CSS custom properties for theming"
      - "Media queries for responsiveness"

    javascript_approach:
      - "Embedded JavaScript in <script> tag"
      - "Module pattern for state management"
      - "Event delegation for interactions"
      - "Native DOM APIs only"

  constitutional_compliance:
    library_first: "Using native browser APIs (no external libraries needed)"
    test_first: "Tests written before implementation"
    simplicity: "Single file deployment, minimal complexity"
    anti_abstraction: "Direct DOM manipulation, no frameworks"
    integration_first: "E2E tests over unit tests"
    minimal_structure: "Flat file organization"
    framework_direct: "Native HTML5 dialog, button, DOM APIs"
    comprehensive_testing: "100% interaction coverage"

# 🧪 Testing Strategy
testing_strategy:
  test_types:
    e2e_tests:
      framework: "Playwright or Cypress"
      coverage:
        - "Complete user journey (1-10 clicks)"
        - "Modal appearance and interactions"
        - "Keyboard navigation flows"
        - "Mobile responsive behavior"

    integration_tests:
      framework: "Jest with jsdom"
      coverage:
        - "Button click handling"
        - "State transitions"
        - "Modal show/hide logic"
        - "Message randomization"

    accessibility_tests:
      framework: "axe-core"
      coverage:
        - "Keyboard navigation"
        - "Screen reader compatibility"
        - "Color contrast validation"
        - "ARIA compliance"

    performance_tests:
      framework: "Lighthouse CI"
      coverage:
        - "Page load performance"
        - "Interaction response times"
        - "Memory usage patterns"

  test_data:
    scenarios:
      - "First-time user clicks 1-10 times"
      - "User refreshes page mid-journey"
      - "User uses keyboard-only navigation"
      - "User on mobile device"
      - "User with screen reader"

# 📋 Work Breakdown (UoW)
work_breakdown:
  uow_001_basic_layout:
    title: "Basic Layout and Styling"
    description: "Create HTML structure and crude styling"
    dependencies: []
    deliverables:
      - "HTML structure with header, message area, button"
      - "Embedded CSS with intentional crude styling"
      - "Responsive layout for mobile/desktop"
    estimation: "2 hours"
    constitutional_requirements:
      - "Minimal structure principle"
      - "Simplicity principle"

  uow_002_state_management:
    title: "Click Counting and State Logic"
    description: "Implement click handling and state management"
    dependencies: ["uow_001_basic_layout"]
    deliverables:
      - "Click count state management"
      - "Random message selection logic"
      - "Message display updates"
    estimation: "3 hours"
    constitutional_requirements:
      - "Anti-abstraction principle"
      - "Framework-direct principle"

  uow_003_modal_component:
    title: "Payment Confirmation Modal"
    description: "Implement modal with accessibility features"
    dependencies: ["uow_002_state_management"]
    deliverables:
      - "Native dialog element implementation"
      - "Modal show/hide logic"
      - "Focus trap and ESC handling"
    estimation: "4 hours"
    constitutional_requirements:
      - "Library-first principle (native dialog)"
      - "Accessibility-first domain principle"

  uow_004_modal_actions:
    title: "Modal Response Handling"
    description: "Implement Yes/No button actions"
    dependencies: ["uow_003_modal_component"]
    deliverables:
      - "Yes button: alert and close"
      - "No button: close only"
      - "Event handling for modal actions"
    estimation: "2 hours"
    constitutional_requirements:
      - "Simplicity principle"

  uow_005_configuration:
    title: "Configuration System"
    description: "Implement external configuration loading"
    dependencies: ["uow_004_modal_actions"]
    deliverables:
      - "app.config.json structure"
      - "Configuration loading logic"
      - "Configurable text and behavior"
    estimation: "2 hours"
    constitutional_requirements:
      - "Configuration-driven content principle"

  uow_006_testing:
    title: "Comprehensive Testing Suite"
    description: "Implement all testing layers"
    dependencies: ["uow_005_configuration"]
    deliverables:
      - "E2E test suite"
      - "Integration tests"
      - "Accessibility tests"
      - "Performance tests"
    estimation: "6 hours"
    constitutional_requirements:
      - "Test-first principle"
      - "Comprehensive testing principle"
      - "Integration-first principle"

# 🎯 Acceptance Criteria
acceptance_criteria:
  ac_001_visual_display:
    description: "Visual elements display correctly"
    criteria:
      - "Header text 'Don't Press Button' visible at top"
      - "Red button prominently displayed below header"
      - "Message area positioned between header and button"

  ac_002_interaction_behavior:
    description: "Button interactions work correctly"
    criteria:
      - "Click count increments on each button press"
      - "Random Korean message appears after each click"
      - "Messages change with each click (may repeat)"

  ac_003_modal_functionality:
    description: "10th click modal works correctly"
    criteria:
      - "Modal appears on exactly 10th click"
      - "Modal shows payment confirmation message in English"
      - "Yes/No buttons present and functional"

  ac_004_modal_responses:
    description: "Modal responses work correctly"
    criteria:
      - "Yes: shows 'Payment completed' alert, closes modal"
      - "No: closes modal without alert"
      - "ESC: closes modal without alert"

  ac_005_state_management:
    description: "State persistence works correctly"
    criteria:
      - "Count resets to 0 on page refresh"
      - "Continued clicking after 10th works without additional modals"

  ac_006_accessibility:
    description: "Accessibility requirements met"
    criteria:
      - "Button accessible via Tab navigation"
      - "Button activatable with Enter/Space"
      - "Modal focus trap active when displayed"
      - "ESC closes modal"

  ac_007_responsive_design:
    description: "Responsive design works correctly"
    criteria:
      - "Layout works on 360px mobile viewport"
      - "Button and text readable on all screen sizes"
      - "Modal centers correctly on all viewport sizes"

# 🔍 Quality Gates
quality_gates:
  code_quality:
    test_coverage: ">= 100% for user interactions"
    performance: "< 100ms click response time"
    accessibility: "Zero axe-core violations"
    browser_compatibility: "All target browsers pass"

  constitutional_compliance:
    all_principles_demonstrated: true
    no_abstraction_violations: true
    test_first_methodology: true
    simplicity_maintained: true

  deployment_readiness:
    single_file_deployment: true
    static_hosting_compatible: true
    no_external_dependencies: true
    configuration_externalized: true

# 🚀 Deployment Configuration
deployment:
  target_environment: "Static hosting (GitHub Pages, Netlify, Vercel)"
  build_process: "Optional bundling for optimization"
  deployment_package: "Single HTML file + config JSON"
  cdn_compatibility: true
  performance_requirements:
    first_contentful_paint: "< 1.5s"
    largest_contentful_paint: "< 2.5s"
    cumulative_layout_shift: "< 0.1"

# 📈 Success Metrics
success_metrics:
  user_experience:
    completion_rate: "> 80% users reach 10th click"
    interaction_satisfaction: "Positive user feedback"
    accessibility_compliance: "100% axe-core pass rate"

  technical_performance:
    page_load_time: "< 1 second"
    interaction_response: "< 100ms"
    mobile_performance: "Lighthouse score > 90"

  constitutional_alignment:
    principle_compliance: "100% adherence to all 9 principles"
    simplicity_score: "Single file deployment achieved"
    test_coverage: "100% for critical interactions"

# Constitutional Compliance Statement
constitutional_compliance_statement:
  description: "This SSOT demonstrates full compliance with DontPressButton's Constitutional principles"
  compliance_details:
    - "Library-First: Native browser APIs used throughout"
    - "CLI Interface: Development commands via scripts"
    - "Test-First: Testing strategy defined before implementation"
    - "Simplicity: Single-file architecture, minimal complexity"
    - "Anti-Abstraction: Direct DOM manipulation, no frameworks"
    - "Integration-First: E2E and integration tests prioritized"
    - "Minimal Structure: Flat project organization"
    - "Framework-Direct: Native HTML5 dialog and DOM APIs"
    - "Comprehensive Testing: 100% coverage for user interactions"

  final_note: "This SSOT serves as the definitive specification for DontPressButton implementation and must be referenced for all development decisions."